!function(){"use strict";let e={useCache:!0},t=WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),n;function r(e){e instanceof HTMLImageElement&&e.src.endsWith(".jxl")?e.complete&&0===e.naturalHeight?c(e,!1):e.onerror=()=>c(e,!1):e instanceof Element&&getComputedStyle(e).backgroundImage.endsWith('.jxl")')&&c(e,!0)}function a(t,r,a){let c=t.dataset.jxlSrc;if(r instanceof Blob){let l=URL.createObjectURL(r);a?t.style.backgroundImage='url("'+l+'")':t.src=l}else{let o=document.createElement("canvas");o.width=r.width,o.height=r.height,o.getContext("2d").putImageData(r,0,0),o.toBlob(r=>{let l=URL.createObjectURL(r);a?t.style.backgroundImage='url("'+l+'")':t.src=l,e.useCache&&n&&n.put(c,new Response(r))},"image/jpeg")}}async function c(t,r){let c=t.dataset.jxlSrc=r?getComputedStyle(t).backgroundImage.slice(5,-2):t.currentSrc;if(t.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",e.useCache){try{n=n||await caches.open("jxl")}catch(o){}let i=n&&await n.match(c);if(i){let s=await i.blob();requestAnimationFrame(()=>a(t,s,r));return}}let u=await fetch(c);requestAnimationFrame(()=>l(u,t,r))}async function l(e,t,n){let r,c,l,o;function i(){o.read().then(s,$)}function s(e){if(e.done){d();return}let t=0;for(;t<e.value.length;){let n=e.value.length-t;n>102400&&(n=102400),r.HEAP8.set(e.value.slice(t,t+n),l),t+=n,u(n)||$("Processing error")}setTimeout(i,0)}function u(e){let o=function e(t){let n={error:!1,wantFlush:!1,copyPixels:!1},a=r._jxlProcessInput(c,l,t);return 2===a||(1===a?(n.wantFlush=!0,n.copyPixels=!0):0===a?(n.wantFlush=!1,n.copyPixels=!0):n.error=!0),n}(e);if(o.error)return!1;if(o.wantFlush&&r._jxlFlush(c),o.copyPixels){let i=r.HEAP32[c>>2],s=r.HEAP32[c+4>>2],u=r.HEAP32[c+8>>2],$=new Uint8Array(r.HEAP8.buffer),d=new ImageData(new Uint8ClampedArray($.slice(u,u+i*s*4)),i,s);requestAnimationFrame(()=>a(t,d,n))}return!0}function $(e){console.error("Error loading image:",e),d()}function d(){r._jxlDestroyInstance(c),r._free(l),r=c=l=void 0}if((c=(r=await JxlCodecModule())._jxlCreateInstance(!0,100))<4){$("Cannot create decoder");return}l=r._malloc(102400),o=e.body.getReader(),i()}let o=document.createElement("script");o.src=t?"jxl_decoder_simd.min.js":"jxl_decoder.min.js",o.onload=function e(){document.body&&document.body.querySelectorAll("*").forEach(r),new MutationObserver(e=>e.forEach(e=>e.addedNodes.forEach(r))).observe(document.documentElement,{subtree:!0,childList:!0})},document.head.appendChild(o)}();